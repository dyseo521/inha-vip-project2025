/**
 * Use Case Templates for Synthetic Data Generation
 * 카테고리별 상세 사용 사례 템플릿
 */

export interface UseCaseTemplate {
  industry: string;
  application: string;
  descriptionTemplates: string[];  // 랜덤 선택용 다양한 설명 템플릿
  requirements?: Record<string, string>;
}

// 카테고리별 사용 사례 템플릿
export const USE_CASE_TEMPLATES: Record<string, UseCaseTemplate[]> = {
  battery: [
    {
      industry: '에너지 저장 시스템 (ESS)',
      application: '가정용/상업용 에너지 저장장치',
      descriptionTemplates: [
        '전기차에서 분리된 배터리 팩을 재활용하여 가정용 에너지 저장 시스템으로 변환합니다. 태양광 패널과 연계하여 주간에 생산된 전력을 저장하고 야간이나 전력 피크 시간대에 활용할 수 있습니다. 기존 ESS 대비 30-50% 저렴한 비용으로 구축 가능하며, 10년 이상의 추가 수명을 기대할 수 있습니다.',
        '상업용 건물의 비상 전원 시스템으로 활용됩니다. 정전 시 최대 8시간 동안 필수 장비에 전력을 공급할 수 있으며, 평상시에는 피크 쉐이빙을 통해 전기요금을 절감합니다. UL9540A 인증 획득으로 안전성이 검증되었습니다.',
        '마이크로그리드 시스템의 핵심 구성요소로 활용됩니다. 재생에너지의 간헐성 문제를 해결하고 에너지 자립률을 높이는 데 기여합니다. 원격 모니터링 시스템을 통해 실시간 상태 확인 및 예방 정비가 가능합니다.'
      ],
      requirements: {
        minSOH: '70%',
        voltage: '400-800V',
        certification: 'UN38.3, UL9540A'
      }
    },
    {
      industry: '전기차 수리 및 정비',
      application: '동일 모델 배터리 교체',
      descriptionTemplates: [
        '동일 차량 모델의 배터리 팩 교체용으로 사용됩니다. 정품 신품 대비 60-70% 저렴한 가격으로 소비자 부담을 줄일 수 있으며, 정밀 진단 후 SOH 80% 이상인 배터리만 선별하여 품질을 보장합니다. 설치 후 12개월 보증을 제공합니다.',
        '전문 전기차 정비소에서 성능 저하된 배터리 교체용으로 활용됩니다. BMS(배터리 관리 시스템) 데이터 분석을 통해 정확한 상태 진단이 선행되며, 교체 후 차량 OBD 시스템과의 호환성 테스트를 완료한 후 인도됩니다.',
        '전기차 중고차 딜러십에서 배터리 업그레이드 서비스에 활용됩니다. 노후 배터리를 더 높은 용량이나 더 좋은 상태의 배터리로 교체하여 중고차 가치를 높이고 주행거리를 연장합니다. 교체 이력은 블록체인 기반 시스템에 기록됩니다.'
      ],
      requirements: {
        compatibility: '차량 모델 호환성 확인 필수',
        warranty: '12개월'
      }
    },
    {
      industry: '재활용 및 자원 회수',
      application: '배터리 분해 및 귀금속 추출',
      descriptionTemplates: [
        'SOH 60% 미만의 배터리는 재활용 공정으로 전환됩니다. 리튬, 코발트, 니켈, 망간 등 희귀금속을 95% 이상의 회수율로 추출하여 새 배터리 생산에 재투입합니다. 친환경 습식제련 공정을 적용하여 환경 부담을 최소화합니다.',
        '도시광산 개념의 배터리 리사이클링에 활용됩니다. 배터리 내 귀금속 회수를 통해 원자재 수입 의존도를 낮추고, 순환경제 구축에 기여합니다. EU 배터리 규정의 재활용 함량 요구사항 충족을 위한 필수 공정입니다.',
        '폐배터리 자원화 센터에서 체계적인 분해 및 분류 작업에 활용됩니다. 셀 단위 분리 후 각 구성요소별로 최적화된 재활용 공정을 적용합니다. 블랙매스 제조를 통해 리튬이온배터리 양극재 원료로 재활용됩니다.'
      ],
      requirements: {
        maxSOH: '60%',
        certification: 'R2/e-Stewards'
      }
    },
    {
      industry: '산업용 전동 장비',
      application: '지게차/AGV 전원 시스템',
      descriptionTemplates: [
        '물류 창고의 전동 지게차 배터리로 재활용됩니다. 기존 납축전지 대비 3배 이상의 에너지 밀도를 제공하며, 급속 충전이 가능하여 교대 작업 시 배터리 교체 시간을 단축합니다. 24시간 무중단 운영이 가능한 물류 자동화에 적합합니다.',
        '자율주행 운반 로봇(AGV)의 전원 시스템으로 활용됩니다. 고출력 방전 특성이 요구되는 가속/제동 구간에서 안정적인 전력 공급이 가능합니다. 무선 충전 스테이션과 연동하여 자동 충전 시스템 구축이 가능합니다.',
        '스마트 팩토리의 자동화 설비 전원으로 사용됩니다. PLC 및 각종 센서에 안정적인 전력을 공급하며, UPS 기능을 통해 순간 정전 시에도 데이터 손실 없이 안전 정지가 가능합니다.'
      ]
    },
    {
      industry: '모빌리티 서비스',
      application: '배터리 스와핑 스테이션',
      descriptionTemplates: [
        '배터리 교환형 전기차/전기이륜차 스테이션에서 활용됩니다. 표준화된 배터리 모듈 규격에 맞춰 재가공하여 스와핑 서비스에 투입합니다. 빠른 배터리 교체로 충전 대기 시간 없이 이동성을 확보할 수 있습니다.',
        '공유 킥보드/전기자전거 서비스의 교체용 배터리로 활용됩니다. 경량화를 위해 모듈 단위로 재구성하며, 스마트 잠금장치와 연동된 배터리 관리 시스템을 적용합니다. 도난 방지 및 원격 위치 추적 기능을 포함합니다.'
      ]
    }
  ],

  motor: [
    {
      industry: '산업용 장비 제조',
      application: '공작기계 스핀들 모터',
      descriptionTemplates: [
        'CNC 공작기계의 스핀들 모터로 재활용됩니다. 전기차 구동모터의 높은 토크 밀도와 정밀 제어 특성을 활용하여 고정밀 가공 작업에 적용합니다. 기존 산업용 모터 대비 30% 이상의 에너지 효율 개선이 가능합니다.',
        '정밀 가공 설비의 이송축 구동 모터로 사용됩니다. 서보 제어 시스템과 연동하여 나노미터급 위치 정밀도를 구현합니다. 통합 엔코더를 통한 피드백 제어로 가공 품질을 향상시킵니다.',
        '자동화 생산 라인의 컨베이어 시스템 구동용으로 활용됩니다. 높은 효율과 낮은 소음 특성으로 작업 환경을 개선하며, 변속기 없이 직접 구동이 가능하여 시스템을 단순화합니다.'
      ]
    },
    {
      industry: '농업 기계',
      application: '전동 농기계 파워트레인',
      descriptionTemplates: [
        '전동 트랙터의 주 구동 모터로 재활용됩니다. 무단변속 제어가 가능하여 다양한 농작업에 최적화된 토크-속도 특성을 구현합니다. 디젤 엔진 대비 운영 비용이 70% 이상 절감되며, 온실가스 배출이 없어 친환경 농업에 기여합니다.',
        '농업용 드론의 구동 모터로 사용됩니다. 높은 출력 대 중량 비율로 장시간 비행이 가능하며, 농약 살포, 파종, 작황 모니터링 등 다양한 스마트 농업 작업에 활용됩니다.',
        '자율주행 농업 로봇의 휠 모터로 활용됩니다. 개별 휠 독립 구동을 통해 복잡한 지형에서도 정밀한 주행 제어가 가능합니다. 농작물 사이를 자율 주행하며 잡초 제거, 수확 작업을 수행합니다.'
      ]
    },
    {
      industry: '해양 및 레저',
      application: '전기 보트/요트 추진 시스템',
      descriptionTemplates: [
        '전기 보트의 추진 모터로 재활용됩니다. 방수 처리 및 염수 부식 방지 코팅을 적용하여 해양 환경에서 안정적으로 작동합니다. 조용한 운행으로 해양 생태계 영향을 최소화하고 승객 편의성을 높입니다.',
        '소형 요트의 하이브리드 추진 시스템에 적용됩니다. 항구 근처 저속 운행 시 전기 모드로 전환하여 배출가스 규제를 준수합니다. 회생 제동 기능을 통해 감속 시 에너지를 회수합니다.',
        '수상 레저 장비(수상스키, 웨이크보드 보트)의 추진 시스템으로 활용됩니다. 즉각적인 토크 응답으로 빠른 가속이 가능하며, 레저 활동에 최적화된 성능을 제공합니다.'
      ]
    },
    {
      industry: '발전 및 에너지',
      application: '소형 풍력/수력 발전기',
      descriptionTemplates: [
        '소형 풍력 발전기의 발전기로 재활용됩니다. 전기차 모터의 영구자석을 활용하여 고효율 발전이 가능하며, 저풍속에서도 시동이 걸리는 특성이 있습니다. 오지 마을이나 통신 기지국의 독립 전원으로 활용됩니다.',
        '마이크로 수력 발전 시스템의 발전기로 사용됩니다. 농업용 수로나 소하천의 낙차를 이용하여 청정에너지를 생산합니다. 계통 연계 또는 독립 운전이 가능한 인버터 시스템과 함께 공급됩니다.',
        '플라이휠 에너지 저장 시스템의 모터/발전기로 활용됩니다. 고속 회전에서도 안정적으로 작동하며, 순간 전력 보상 및 주파수 조정 서비스에 기여합니다.'
      ]
    }
  ],

  inverter: [
    {
      industry: '신재생에너지',
      application: '태양광 인버터',
      descriptionTemplates: [
        '태양광 발전 시스템의 계통 연계 인버터로 재활용됩니다. 전기차 인버터의 고효율 전력 변환 기술을 활용하여 DC-AC 변환 효율 98% 이상을 달성합니다. MPPT 기능을 추가하여 태양광 모듈의 최대 전력점을 추적합니다.',
        '가정용 태양광 시스템의 하이브리드 인버터로 사용됩니다. 태양광 발전, 배터리 충방전, 계통 연계를 통합 관리하며 자가소비율을 극대화합니다. 정전 시 자동으로 독립 운전 모드로 전환됩니다.',
        '대규모 태양광 발전소의 중앙 집중식 인버터로 활용됩니다. 고압 직류 링크 기술을 적용하여 케이블 손실을 최소화하고 설비 효율을 높입니다. 원격 모니터링 및 진단 기능을 제공합니다.'
      ]
    },
    {
      industry: '전기차 충전',
      application: 'DC 급속 충전기',
      descriptionTemplates: [
        'DC 급속 충전기의 전력 변환 모듈로 재활용됩니다. 고출력 충전(150kW 이상)에 필요한 대전류 제어 기술이 이미 검증되어 있어 신뢰성이 높습니다. CCS, CHAdeMO 등 다양한 충전 규격을 지원합니다.',
        '양방향 V2G(Vehicle-to-Grid) 충전기의 핵심 부품으로 사용됩니다. 전기차와 전력망 간 쌍방향 전력 흐름을 제어하여 전력 피크 저감과 수요 반응에 기여합니다. 스마트 그리드 인프라의 핵심 요소입니다.',
        '이동형 급속 충전기에 적용됩니다. 컴팩트한 크기와 높은 전력 밀도를 활용하여 긴급 충전 서비스나 충전 인프라가 부족한 지역에서 임시 충전 서비스를 제공합니다.'
      ]
    },
    {
      industry: 'UPS 및 전력 품질',
      application: '무정전 전원장치',
      descriptionTemplates: [
        '데이터센터 UPS 시스템의 인버터 모듈로 재활용됩니다. 고속 전환 시간(10ms 이하)으로 IT 장비 보호에 적합하며, 병렬 운전을 통한 N+1 이중화 구성이 가능합니다. 99.99% 이상의 가용성을 보장합니다.',
        '의료기관의 비상 전원 시스템에 사용됩니다. 수술실, 중환자실 등 중요 의료 장비에 무중단 전력을 공급하며, 의료기기 안전 규격(IEC 60601)을 충족합니다.',
        '산업 현장의 전력 품질 개선 장치로 활용됩니다. 고조파 필터링, 역률 보상, 전압 안정화 기능을 통해 민감한 생산 설비를 보호하고 전력 효율을 개선합니다.'
      ]
    }
  ],

  'body-chassis-frame': [
    {
      industry: '자동차 부품 재제조',
      application: '중고차 섀시 교체 부품',
      descriptionTemplates: [
        '사고 차량의 섀시 수리용 교체 부품으로 활용됩니다. 정밀 레이저 측정을 통해 규격 적합성을 검증하고, 필요시 교정 작업을 거쳐 공급합니다. 정품 대비 40-60% 저렴한 비용으로 수리가 가능합니다.',
        '클래식카 복원 프로젝트에서 희귀 섀시 부품으로 사용됩니다. 3D 스캔 및 역설계를 통해 단종된 부품의 호환품 제작이 가능합니다. 원본 설계 사양을 최대한 유지하면서 현대 소재 기술을 적용합니다.',
        '전기차 컨버전 프로젝트의 베이스 섀시로 활용됩니다. 내연기관 차량을 전기차로 개조할 때 배터리 및 모터 장착을 위한 섀시 수정 작업에 사용됩니다.'
      ]
    },
    {
      industry: '특수 차량 제조',
      application: '맞춤형 차체 제작',
      descriptionTemplates: [
        '캠핑카, 푸드트럭 등 특수 목적 차량의 차체 베이스로 재활용됩니다. 경량 알루미늄 프레임을 활용하여 적재 용량을 늘리고 연비를 개선합니다. 사용자 요구에 맞는 맞춤형 레이아웃 설계가 가능합니다.',
        '장애인 특수차량 제작 시 휠체어 리프트 장착용 보강 프레임으로 사용됩니다. 충분한 강성과 내구성을 갖추고 있어 반복적인 하중에도 안전합니다.',
        '레이싱/랠리 차량의 롤케이지 소재로 활용됩니다. 고강도 특성을 살려 충돌 안전성을 높이면서도 무게를 최소화합니다. FIA 규정에 맞는 인증 시험을 통과합니다.'
      ]
    },
    {
      industry: '건축 및 구조물',
      application: '강철 구조재 활용',
      descriptionTemplates: [
        '임시 건축물이나 조립식 구조물의 철골 프레임으로 재활용됩니다. 자동차용 고장력강의 우수한 강도-중량 비율을 활용하여 경량 구조물을 제작합니다. 재사용 및 해체가 용이하여 순환경제에 기여합니다.',
        '아트 설치물이나 조형물의 골격 구조로 사용됩니다. 자동차 섀시의 유기적인 형태를 활용한 예술 작품 제작에 활용됩니다. 도시 재생 프로젝트의 업사이클링 아트 소재로 인기가 높습니다.',
        '태양광 패널 마운팅 구조물로 활용됩니다. 내식성 코팅을 추가하여 야외 환경에서 장기간 사용이 가능하며, 모듈식 설계로 다양한 설치 환경에 적응합니다.'
      ]
    }
  ],

  'body-panel': [
    {
      industry: '자동차 수리',
      application: '외판 교체 수리',
      descriptionTemplates: [
        '경미한 사고로 손상된 외판 패널의 교체용으로 사용됩니다. 도색 전 상태로 공급되어 현장에서 차량 색상에 맞게 도장 작업이 가능합니다. OEM 품질 수준의 패널을 합리적인 가격에 제공합니다.',
        '우박 손상 등 광범위한 외판 피해 복구에 활용됩니다. 원본 형상과 정밀하게 일치하는 패널을 선별하여 공급하며, 필요시 PDR(Paintless Dent Repair) 작업 후 출하됩니다.',
        '중고차 외관 복원 서비스에 사용됩니다. 녹슬거나 변색된 패널을 교체하여 차량 가치를 높입니다. 교체 전후 사진 기록을 통해 작업 품질을 보장합니다.'
      ]
    },
    {
      industry: '프로토타입 제작',
      application: 'R&D 목업 및 테스트 부품',
      descriptionTemplates: [
        '자동차 연구개발용 테스트 베드에서 충돌 시험이나 공력 테스트에 사용됩니다. 실제 양산 부품과 동일한 소재 특성으로 신뢰성 있는 테스트 결과를 얻을 수 있습니다. 다양한 테스트 조건에서 반복 사용이 가능합니다.',
        '자동차 디자인 스튜디오에서 실물 크기 목업 제작에 활용됩니다. 실제 부품의 곡면과 질감을 체험할 수 있어 디자인 검토 및 개선에 효과적입니다.',
        '애프터마켓 부품 개발 시 피팅 테스트용으로 사용됩니다. 커스텀 바디킷이나 에어로 파츠 장착 호환성을 실제 부품으로 검증합니다.'
      ]
    }
  ],

  'body-door': [
    {
      industry: '자동차 수리 및 정비',
      application: '도어 어셈블리 교체',
      descriptionTemplates: [
        '측면 충돌 사고로 손상된 도어의 교체용으로 사용됩니다. 도어 패널, 힌지, 잠금장치, 윈도우 레귤레이터 등 주요 구성품이 포함된 어셈블리 형태로 공급됩니다. 전문 기술자의 분해/재조립 작업으로 품질을 보장합니다.',
        '창문 고장이나 잠금장치 불량으로 인한 도어 교체에 활용됩니다. 동일 차종의 OEM 부품을 활용하여 완벽한 호환성을 보장하며, 도어 씰 및 웨더스트립은 신품으로 교체하여 공급합니다.',
        '전기차 도어 모듈의 파워 윈도우, 사이드 미러 제어 유닛 등 전장 부품 수리에 사용됩니다. CAN 통신 호환성 확인 후 차량에 적합한 부품을 선별하여 제공합니다.'
      ]
    },
    {
      industry: '특수 개조',
      application: '시저도어/걸윙도어 변환',
      descriptionTemplates: [
        '일반 도어를 시저도어(람보 도어)로 변환하는 애프터마켓 개조에 기본 소재로 활용됩니다. 도어 패널의 강도와 무게 밸런스가 수직 개폐 메커니즘에 적합합니다. 커스텀 힌지 킷과 함께 사용됩니다.',
        '럭셔리 커스텀 차량의 자살문(코치도어) 변환에 사용됩니다. 힌지 위치 재배치를 위한 도어 프레임 가공이 필요하며, 안전 잠금장치를 강화하여 공급합니다.'
      ]
    }
  ],

  'body-window': [
    {
      industry: '자동차 유리 교체',
      application: '전면/후면/측면 유리 교체',
      descriptionTemplates: [
        '파손된 차량 유리의 교체용으로 사용됩니다. 자동차 안전 유리 규격(ECE R43)을 충족하며, 비전 투명도와 자외선 차단 성능이 검증되었습니다. 전문 설치 기사를 통한 시공 서비스와 함께 제공됩니다.',
        '전기차의 특수 유리(프라이버시 유리, 솔라 루프 등) 교체에 활용됩니다. 열선, 안테나 등 내장 기능의 정상 작동을 확인 후 출하합니다. 방음 및 단열 성능을 유지합니다.',
        '스마트 글래스(전자 변색 유리)를 적용한 프리미엄 차량의 유리 교체에 사용됩니다. 전자 제어 시스템과의 연동 테스트 후 공급하며, 투명도 조절 기능이 정상 작동합니다.'
      ]
    },
    {
      industry: '건축 및 인테리어',
      application: '건축용 강화유리 활용',
      descriptionTemplates: [
        '자동차 유리의 강화 처리 기술을 활용하여 건축용 안전 유리로 재활용됩니다. 파티션, 계단 난간, 전시 케이스 등 안전이 요구되는 건축 요소에 적용됩니다. 파손 시 작은 조각으로 부서져 부상 위험을 줄입니다.',
        '그린하우스나 온실의 유리 패널로 활용됩니다. 높은 광투과율과 내구성으로 식물 재배에 최적의 환경을 제공합니다. 단열 코팅을 추가하여 에너지 효율을 높일 수 있습니다.',
        '예술 작품이나 가구의 소재로 업사이클링됩니다. 자동차 유리의 곡면과 색조를 활용한 독특한 디자인 제품을 제작합니다. 조명 기구, 테이블 상판, 장식 오브제 등으로 활용됩니다.'
      ]
    }
  ]
};

/**
 * 카테고리에 맞는 랜덤 사용 사례 생성
 * @param category 부품 카테고리
 * @param count 생성할 사용 사례 개수 (기본 3-5개)
 * @param partInfo 부품 정보 (이름, 제조사 등) - 설명에 맞춤화 적용
 */
export function generateUseCases(
  category: string,
  count?: number,
  partInfo?: { name?: string; manufacturer?: string; model?: string }
): Array<{
  industry: string;
  application: string;
  description: string;
  requirements?: Record<string, string>;
}> {
  const categoryKey = category.startsWith('body-') ? category : category;
  const templates = USE_CASE_TEMPLATES[categoryKey] || USE_CASE_TEMPLATES['body-panel'];

  const numUseCases = count || Math.floor(Math.random() * 3) + 3; // 3-5개
  const selectedTemplates: UseCaseTemplate[] = [];

  // 중복 없이 템플릿 선택
  const shuffledTemplates = [...templates].sort(() => Math.random() - 0.5);
  for (let i = 0; i < Math.min(numUseCases, shuffledTemplates.length); i++) {
    selectedTemplates.push(shuffledTemplates[i]);
  }

  return selectedTemplates.map(template => {
    // 랜덤 설명 선택
    let description = template.descriptionTemplates[
      Math.floor(Math.random() * template.descriptionTemplates.length)
    ];

    // 부품 정보가 있으면 설명에 맞춤화 적용
    if (partInfo?.name) {
      description = description.replace(
        /(배터리 팩|모터|인버터|섀시|패널|도어|유리)/,
        partInfo.name.split(' ').slice(0, 3).join(' ')
      );
    }

    return {
      industry: template.industry,
      application: template.application,
      description,
      ...(template.requirements && { requirements: template.requirements })
    };
  });
}

/**
 * 단일 사용 사례 템플릿에서 랜덤 생성
 */
export function generateSingleUseCase(
  template: UseCaseTemplate
): {
  industry: string;
  application: string;
  description: string;
  requirements?: Record<string, string>;
} {
  const description = template.descriptionTemplates[
    Math.floor(Math.random() * template.descriptionTemplates.length)
  ];

  return {
    industry: template.industry,
    application: template.application,
    description,
    ...(template.requirements && { requirements: template.requirements })
  };
}
